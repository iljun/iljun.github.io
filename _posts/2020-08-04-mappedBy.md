---
layout: post
title: JPA
subtitle: MappedBy 
---
# MappedBy
연관 관계의 주인을 설정하는 Annotation이다.

연관 관계의 주인이란 바로 서로의 데이터를 연결시켜주는 FK를 누가 가지고 있느냐를 나타내는 것이다.

MappedBy가 중요한 이유는 바로 객체 지향과 관계형 데이터베이스 간의 패러다임의 차이 때문에 꼭 알아야하는 개념이다.

## 객체의 연관 관계
객체에서의 연관 관계란 서로 참조해야 하는 객체들이 서로의 주소값을 참조하는 것이다.

그렇다면 양방햔 관계란?

바로 서로 다른 객체가 서로의 주소값을 참조하면서 서로 탐색이 가능한 상태 

즉, 서로간의 단방향 관계이다. 

## 테이블의 양방향 관계
테이블에는 FK로 서로간의 관계를 정의한다.

테이블에는 서로 참조하는 방향은 존재하지 않고, FK를 이용한 JOIN으로 서로간의 관계를 나타낸다.

## 패러다임의 차이
객체의 양방향 관계에서는 양쪽의 객체가 FK를 가지고 있을 수 있다.

만약 데이터 베이스에서도 양쪽의 테이블에 모두 FK를 가지고 있다면 데이터의 차이가 발생 할 수 있다.

그렇기 때문에 데이터 베이스에서는 하나의 테이블에만 FK를 가지고 있는다.

그렇다면 양방향 관계의 객체에서 저장, 수정은 어떻게 처리해야 할까?

바로 @MappedBy를 이용해서 연관 관계의 주인을 정해, 연관 관계의 주인만이 FK를 관리해 패러다임의 불일치를 해결하는 것이다.

@MappedBy가 설정되어야 하는 곳은 N쪽이다.

N쪽에서 FK를 관리하는 것이 데이터 베이스의 패러다임에 알맞는다.


